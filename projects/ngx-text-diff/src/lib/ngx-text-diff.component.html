<td-loader-sppiner [active]="loading"></td-loader-sppiner>
<div *ngIf="!loading">
  <div class="td-wrapper">
    <div class="td-toolbar-show-diff">
      <label class="td-checkbox-container">Show Lines with Diffs ({{diffs}})
        <input type="checkbox"
               id="showDiffs"
               [ngModel]="showLinesDiffs"
               (ngModelChange)="showLinesDiffsChange($event)"
        >
        <span class="checkmark"></span>
      </label>
    </div>
    <div class="td-toolbar-select-format" *ngIf="showBtnToolbar">
      <div class="td-btn-group td-btn-group-toggle" data-toggle="buttons">
        <button *ngFor="let option of formatOptions"
                [ngClass]="{'active': format === option.value, 'disabled': !!option.disabled}"
                [name]="option.name"
                [id]="option.id"
                [disabled]="!!option.disabled"
                (click)="setDiffTableFormat(option.value)"
        >{{option.label}}
        </button>
      </div>
    </div>
    <div class="td-table-wrapper">
      <div class="td-table-container side-by-side" *ngIf="format === 'SideBySide'">
      <table class="td-table">
        <tbody>
        <tr *ngFor="let row of filteredLeftRightRows">
          <td scope="row" class="fit-column line-number-col"
              [ngClass]="{'delete-row' : row.prefix === '-', 'empty-row': !row.content}">{{(row.lineNumberLeft !== -1) ?
            row.lineNumberLeft : ' '}}
          </td>
          <td class="fit-column prefix-col" [ngClass]="{'delete-row' : row.prefix === '-', 'empty-row': !row.content}">
            <pre>{{row.prefix || ' '}}</pre>
          </td>
          <td class="content-col" [ngClass]="{'delete-row' : row.prefix === '-', 'empty-row': !row.content}">
            <pre>{{row.content || ' '}}</pre>
          </td>
        </tr>
        </tbody>
      </table>
      </div>
      <div class="td-table-container side-by-side" *ngIf="format === 'SideBySide'">
      <table class="td-table">
        <tbody>
        <tr *ngFor="let row of filteredLeftRightRows">
          <td scope="row" class="fit-column line-number-col"
              [ngClass]="{'insert-row' : row.prefixRight === '+', 'empty-row': !row.contentRight}">
            {{(row.lineNumberRight !== -1) ? row.lineNumberRight : ' '}}
          </td>
          <td class="fit-column prefix-col"
              [ngClass]="{'insert-row' : row.prefixRight === '+', 'empty-row': !row.contentRight}">
            <pre>{{row.prefixRight || ' '}}</pre>
          </td>
          <td class="content-col" [ngClass]="{'insert-row' : row.prefixRight === '+', 'empty-row': !row.contentRight}">
            <pre>{{row.contentRight || ' '}}</pre>
          </td>
        </tr>
        </tbody>
      </table>
      </div>
      <table class="td-table td-table-container line-by-line" *ngIf="format === 'LineByLine'">
        <tbody>
        <tr *ngFor="let row of filteredRows">
          <td scope="row" class="fit-column line-number-col-left">{{row.lineNumberLeft}}</td>
          <td scope="row" class="fit-column line-number-col">{{row.lineNumberRight}}</td>
          <td class="fit-column prefix-col"
              [ngClass]="{'delete-row' : row.prefix === '-', 'insert-row' : row.prefix === '+'}">
            <pre>{{row.prefix || ' '}}</pre>
          </td>
          <td class="content-col" [ngClass]="{'delete-row' : row.prefix === '-', 'insert-row' : row.prefix === '+'}">
            <pre>{{row.content || ' '}}</pre>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
